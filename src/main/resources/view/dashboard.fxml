<?xml version="1.0" encoding="UTF-8"?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.geometry.*?>
<?import javafx.scene.shape.*?>
<?import javafx.scene.effect.*?>
<?import javafx.scene.layout.StackPane?>

<BorderPane xmlns="http://javafx.com/javafx/17" xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="com.shopmanager.controller.DashboardController">
    
    <top>
        <HBox spacing="20" alignment="CENTER_LEFT" styleClass="appbar">
            <children>
                <!-- Titre avec icône -->
                <HBox spacing="15" alignment="CENTER_LEFT">
                    <children>
                        <Label text="📊" style="-fx-font-size: 32px;"/>
                        <VBox spacing="2">
                            <children>
                                <Label text="Dashboard" styleClass="title"/>
                                <Label text="Vue d'ensemble de votre magasin" styleClass="caption"/>
                            </children>
                        </VBox>
                    </children>
                </HBox>
                
                <Pane HBox.hgrow="ALWAYS"/>
                
                <!-- Boutons d'action -->
                <HBox spacing="12" alignment="CENTER_RIGHT">
                    <children>
                        <Button fx:id="refreshBtn" text="🔄 Actualiser" styleClass="button,glass"/>
                        <Button fx:id="toggleThemeBtn" text="🎨 Thème" styleClass="button,primary"/>
                        <Button fx:id="logoutBtn" text="🚪 Déconnexion" styleClass="button,accent"/>
                    </children>
                </HBox>
            </children>
        </HBox>
    </top>
    
    <center>
        <ScrollPane fitToWidth="true" style="-fx-background-color: transparent;">
            <content>
                <VBox spacing="40" styleClass="p-lg">
                    <children>
                        
                        <!-- Stats Cards Section -->
                        <VBox spacing="20">
                            <children>
                                <HBox alignment="CENTER_LEFT" spacing="10">
                                    <children>
                                        <Label text="📈" style="-fx-font-size: 20px;"/>
                                        <Label text="Statistiques en temps réel" styleClass="subtitle"/>
                                    </children>
                                </HBox>
                                
                                <GridPane hgap="24" vgap="24">
                                    <columnConstraints>
                                        <ColumnConstraints percentWidth="33.33"/>
                                        <ColumnConstraints percentWidth="33.33"/>
                                        <ColumnConstraints percentWidth="33.34"/>
                                    </columnConstraints>
                                    <children>
                                        <!-- Carte Ventes -->
                                        <VBox GridPane.columnIndex="0" styleClass="stats-card,primary" spacing="12" alignment="CENTER_LEFT">
                                            <children>
                                                <HBox spacing="10" alignment="CENTER_LEFT">
                                                    <children>
                                                        <Label text="💰" style="-fx-font-size: 28px;"/>
                                                        <VBox spacing="4" alignment="CENTER_LEFT">
                                                            <children>
                                                                <Label fx:id="salesTodayValue" text="24" styleClass="stats-value"/>
                                                                <Label text="Ventes du jour" styleClass="stats-label"/>
                                                            </children>
                                                        </VBox>
                                                    </children>
                                                </HBox>
                                                <Label text="📊 +12% vs hier" styleClass="stats-change"/>
                                            </children>
                                        </VBox>
                                        
                                        <!-- Carte Revenus -->
                                        <VBox GridPane.columnIndex="1" styleClass="stats-card,success" spacing="12" alignment="CENTER_LEFT">
                                            <children>
                                                <HBox spacing="10" alignment="CENTER_LEFT">
                                                    <children>
                                                        <Label text="💸" style="-fx-font-size: 28px;"/>
                                                        <VBox spacing="4" alignment="CENTER_LEFT">
                                                            <children>
                                                                <Label fx:id="revenueValue" text="2,450€" styleClass="stats-value"/>
                                                                <Label text="Chiffre d'affaires" styleClass="stats-label"/>
                                                            </children>
                                                        </VBox>
                                                    </children>
                                                </HBox>
                                                <Label text="📈 +8% vs hier" styleClass="stats-change"/>
                                            </children>
                                        </VBox>
                                        
                                        <!-- Carte Stock -->
                                        <VBox GridPane.columnIndex="2" styleClass="stats-card,warning" spacing="12" alignment="CENTER_LEFT">
                                            <children>
                                                <HBox spacing="10" alignment="CENTER_LEFT">
                                                    <children>
                                                        <Label text="📦" style="-fx-font-size: 28px;"/>
                                                        <VBox spacing="4" alignment="CENTER_LEFT">
                                                            <children>
                                                                <Label fx:id="outOfStockValue" text="3" styleClass="stats-value"/>
                                                                <Label text="Produits en rupture" styleClass="stats-label"/>
                                                            </children>
                                                        </VBox>
                                                    </children>
                                                </HBox>
                                                <Label fx:id="outOfStockLabel" text="⚠️ Attention requise" styleClass="stats-change"/>
                                            </children>
                                        </VBox>
                                    </children>
                                </GridPane>
                            </children>
                        </VBox>
                        
                        <!-- Actions Rapides Section -->
                        <VBox spacing="20">
                            <children>
                                <HBox alignment="CENTER_LEFT" spacing="10">
                                    <children>
                                        <Label text="⚡" style="-fx-font-size: 20px;"/>
                                        <Label text="Actions rapides" styleClass="subtitle"/>
                                    </children>
                                </HBox>
                                
                                <GridPane hgap="20" vgap="20">
                                    <columnConstraints>
                                        <ColumnConstraints percentWidth="20"/>
                                        <ColumnConstraints percentWidth="20"/>
                                        <ColumnConstraints percentWidth="20"/>
                                        <ColumnConstraints percentWidth="20"/>
                                        <ColumnConstraints percentWidth="20"/>
                                    </columnConstraints>
                                    <children>
                                        <VBox GridPane.columnIndex="0" styleClass="nav" alignment="CENTER" spacing="8">
                                            <children>
                                                <Button fx:id="productsBtn" text="📦" style="-fx-font-size: 32px; -fx-background-color: transparent; -fx-border-color: transparent;"/>
                                                <Label text="Produits" styleClass="body" style="-fx-font-weight: 600;"/>
                                                <Label text="Gérer l'inventaire" styleClass="caption"/>
                                            </children>
                                        </VBox>
                                        
                                        <VBox GridPane.columnIndex="1" styleClass="nav" alignment="CENTER" spacing="8">
                                            <children>
                                                <Button fx:id="customersBtn" text="👥" style="-fx-font-size: 32px; -fx-background-color: transparent; -fx-border-color: transparent;"/>
                                                <Label text="Clients" styleClass="body" style="-fx-font-weight: 600;"/>
                                                <Label text="Base clients" styleClass="caption"/>
                                            </children>
                                        </VBox>
                                        
                                        <VBox GridPane.columnIndex="2" styleClass="nav" alignment="CENTER" spacing="8">
                                            <children>
                                                <Button fx:id="salesBtn" text="💰" style="-fx-font-size: 32px; -fx-background-color: transparent; -fx-border-color: transparent;"/>
                                                <Label text="Ventes" styleClass="body" style="-fx-font-weight: 600;"/>
                                                <Label text="Nouvelle vente" styleClass="caption"/>
                                            </children>
                                        </VBox>
                                        
                                        <VBox GridPane.columnIndex="3" styleClass="nav" alignment="CENTER" spacing="8">
                                            <children>
                                                <Button fx:id="usersBtn" text="⚙️" style="-fx-font-size: 32px; -fx-background-color: transparent; -fx-border-color: transparent;"/>
                                                <Label text="Utilisateurs" styleClass="body" style="-fx-font-weight: 600;"/>
                                                <Label text="Gestion équipe" styleClass="caption"/>
                                            </children>
                                        </VBox>
                                        
                                        <VBox GridPane.columnIndex="4" styleClass="nav" alignment="CENTER" spacing="8">
                                            <children>
                                                <Button fx:id="salesHistoryBtn" text="📄" style="-fx-font-size: 32px; -fx-background-color: transparent; -fx-border-color: transparent;"/>
                                                <Label text="Historique" styleClass="body" style="-fx-font-weight: 600;"/>
                                                <Label text="Rapports" styleClass="caption"/>
                                            </children>
                                        </VBox>
                                    </children>
                                </GridPane>
                            </children>
                        </VBox>
                        
                        <!-- Section Activité Récente -->
                        <VBox spacing="20">
                            <children>
                                <HBox alignment="CENTER_LEFT" spacing="10">
                                    <children>
                                        <Label text="🕒" style="-fx-font-size: 20px;"/>
                                        <Label text="Activité récente" styleClass="subtitle"/>
                                    </children>
                                </HBox>
                                
                                <HBox spacing="24">
                                    <children>
                                        <!-- Ventes récentes -->
                                        <VBox fx:id="recentSalesVBox" styleClass="card" spacing="16" HBox.hgrow="ALWAYS">
                                            <children>
                                                <HBox alignment="CENTER_LEFT" spacing="8">
                                                    <children>
                                                        <Label text="📊" style="-fx-font-size: 18px;"/>
                                                        <Label text="Dernières ventes" styleClass="body" style="-fx-font-weight: 600;"/>
                                                    </children>
                                                </HBox>
                                                
                                                <!-- Dynamic content will be inserted here -->
                                                
                                                <Button text="Voir toutes les ventes →" styleClass="button,primary" style="-fx-font-size: 12px; -fx-padding: 8px 16px;"/>
                                            </children>
                                        </VBox>
                                        
                                        <!-- Alertes stock -->
                                        <VBox fx:id="stockAlertsVBox" styleClass="card" spacing="16" HBox.hgrow="ALWAYS">
                                            <children>
                                                <HBox alignment="CENTER_LEFT" spacing="8">
                                                    <children>
                                                        <Label text="⚠️" style="-fx-font-size: 18px;"/>
                                                        <Label text="Alertes stock" styleClass="body" style="-fx-font-weight: 600;"/>
                                                    </children>
                                                </HBox>
                                                
                                                <!-- Dynamic content will be inserted here -->
                                                
                                                <Button text="Gérer le stock →" styleClass="button,accent" style="-fx-font-size: 12px; -fx-padding: 8px 16px;"/>
                                            </children>
                                        </VBox>
                                    </children>
                                </HBox>
                            </children>
                        </VBox>
                        
                        <!-- Section Graphiques de Performance -->
                        <VBox spacing="20">
                            <children>
                                <HBox alignment="CENTER_LEFT" spacing="10">
                                    <children>
                                        <Label text="📈" style="-fx-font-size: 20px;"/>
                                        <Label text="Performance cette semaine" styleClass="subtitle"/>
                                    </children>
                                </HBox>
                                
                                <HBox fx:id="performanceChartHBox" spacing="24">
                                    <children>
                                        <!-- Graphique des ventes -->
                                        <VBox styleClass="card,glass" spacing="20" HBox.hgrow="ALWAYS">
                                            <children>
                                                <VBox spacing="8">
                                                    <children>
                                                        <Label text="💹 Ventes par jour" styleClass="body" style="-fx-font-weight: 600;"/>
                                                        <Label text="Évolution des ventes sur 7 jours" styleClass="caption"/>
                                                    </children>
                                                </VBox>
                                                
                                                <!-- Dynamic content will be inserted here -->
                                                
                                            </children>
                                        </VBox>
                                        
                                        <!-- Top produits -->
                                        <VBox fx:id="topProductsVBox" styleClass="card" spacing="20" HBox.hgrow="ALWAYS">
                                            <children>
                                                <VBox spacing="8">
                                                    <children>
                                                        <Label text="🏆 Top produits" styleClass="body" style="-fx-font-weight: 600;"/>
                                                        <Label text="Les plus vendus cette semaine" styleClass="caption"/>
                                                    </children>
                                                </VBox>
                                                
                                                <!-- Dynamic content will be inserted here -->
                                                
                                            </children>
                                        </VBox>
                                    </children>
                                </HBox>
                            </children>
                        </VBox>
                        
                        <!-- Footer avec actions supplémentaires -->
                        <VBox spacing="20">
                            <children>
                                <Separator style="-fx-background-color: rgba(226,232,240,0.5);"/>
                                
                                <HBox spacing="16" alignment="CENTER">
                                    <children>
                                        <Button text="📊 Rapport détaillé" styleClass="button"/>
                                        <Button text="⚙️ Paramètres" styleClass="button"/>
                                        <Button text="📞 Support" styleClass="button"/>
                                        <Button text="🔄 Synchroniser" styleClass="button,primary"/>
                                    </children>
                                </HBox>
                            </children>
                        </VBox>
                        
                    </children>
                </VBox>
            </content>
        </ScrollPane>
    </center>
</BorderPane>